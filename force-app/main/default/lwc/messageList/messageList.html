<template>
    <lightning-card title="Recent WA Messages">
        <lightning-datatable
            key-field="Id"
            data={messages}
            columns={columns}
            onrowaction={handleRowAction}>
            <template if:true={messages}>
                <template for:each={messages} for:item="message">
                    <tr key={message.Id}>
                        <td>{message.Name}</td>
                        <td>{message.MessageContent__c}</td>
                        <td>
                            <a href="#" data-phone={message.CustomerPhone__c} onclick={handlePhoneClick}>
                                {message.CustomerPhone__c}
                            </a>
                        </td>
                        <td>{message.Message_Sent_Time__c}</td>
                        <td>
                            <lightning-button-menu alternative-text="Show actions">
                                <lightning-menu-item label="Register New Mobile" onclick={registerNewMobile}></lightning-menu-item>
                                <lightning-menu-item label="Send Text Message" onclick={sendTextMessage}></lightning-menu-item>
                            </lightning-button-menu>
                        </td>
                    </tr>
                </template>
            </template>
        </lightning-datatable>
    </lightning-card>
</template>